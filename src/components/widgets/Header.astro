
---
import { Icon } from 'astro-icon/components';
import Button from '~/components/ui/Button.astro';

import type { CallToAction } from '~/types';
import Navigation from "../navbar/Navigation.astro";
import {BASE_PATH} from "../navbar/menu-items";

interface Link {
    text?: string;
    href?: string;
    ariaLabel?: string;
    icon?: string;
}

interface MenuLink extends Link {
    links?: Array<MenuLink>;
}

export interface Props {
    id?: string;
    links?: Array<MenuLink>;
    actions?: Array<CallToAction>;
    isSticky?: boolean;
    isDark?: boolean;
    isFullWidth?: boolean;
    showToggleTheme?: boolean;
    showRssFeed?: boolean;
    position?: string;
}

const {
    id = 'header',
    links = [],
    actions = [],
    isSticky = false,
    isDark = false,
    isFullWidth = false,
    showToggleTheme = false,
    showRssFeed = false,
    position = 'center',
} = Astro.props;

const isHome = Astro.url.pathname === `${BASE_PATH}/`;
---

<header
        class:list={[
            'z-40 fixed py-xs flex-none mx-auto w-full px-custom',
            'border-b border-gray-50/0 transition-all duration-500 ease-in-out',
            'h-20',
            isHome ? 'bg-transparent dark:bg-transparent text-light' : 'bg-primary text-light',
        ]}
        id={id}
>
        <div class="container-custom py-2.5 ">
            <Navigation />
        </div>
</header>

<script type="text/javascript">
    // Function to handle scroll event and toggle the background
    window.addEventListener('scroll', () => {
        const header = document.querySelector('header');
        const isHome = window.location.pathname === '/socrates-2025';

        if (!isHome) return;

        if (window.scrollY > 200) {
            // Add 'bg-primary' class when scrolled down more than 50px
            header.classList.add('bg-primary');
            header.classList.add('dark:bg-contrast');
            header.classList.remove('bg-transparent');
            header.classList.remove('dark:bg-transparent');
        } else {
            // Add 'bg-transparent' class when at the top of the page
            header.classList.add('bg-transparent');
            header.classList.add('dark:bg-transparent');
            header.classList.remove('bg-primary');
            header.classList.remove('dark:bg-black');
        }
    });
</script>